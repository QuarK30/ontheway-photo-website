# OnTheWay 项目上下文（Project Context）

更新时间：2026-02-22  
用途：用于下次继续对话时快速恢复背景、关键决策与当前进度。

---

## 1. 项目一句话介绍

**OnTheWay** 是一个个人摄影集网站：以**世界地图**为首页入口，用**红点**标出有照片的地点；点击红点即可跳转到对应照片（高清原图约 10–20MB/张）。网站风格为**简约科技感**。

---

## 2. 用户角色与权限（已确定）

- **管理员（我本人）**
  - 可登录后台
  - 可上传照片
  - 可编辑照片信息（标题/描述/拍摄地点经纬度等）
  - 可删除/隐藏/管理留言
- **游客**
  - 可浏览地图、相册/列表、照片详情
  - 可留言（但无上传/管理权限）
  - 进入网站需先获得一个“游客昵称”（见下）

---

## 3. 核心交互与规则（已确定）

### 3.1 地图首页

- 首页为世界地图
- 支持鼠标滚轮缩放、拖拽平移
- 有照片的地点在地图上显示**红点**
- 点击红点跳转到该地点的照片（单张直接详情；多张先列表再进详情）

### 3.2 高清图片展示（关键约束）

- 单张图片约 **10MB–20MB**
- 列表/地图使用缩略图或中等尺寸图以保证加载性能
- 详情页按需加载高清图，并提供加载状态（占位/骨架/进度）

### 3.3 游客昵称（已写入 PRD）

- 游客进入网站时需获得一个**昵称**
- 可自行输入昵称，或由系统随机生成
- 若选择随机生成且不满意，可多次点击重新随机，直到满意
- 留言时使用该昵称身份发表

---

## 4. 文档产出（已完成）

- `PRD.md`
  - 已写明产品定位、角色权限、地图首页、图片与性能、留言与昵称规则、管理后台、验收标准与待定项。
- `DEVELOPMENT-PLAN.md`
  - 基于技术栈与 PRD，拆分了快速开发与上线的**阶段/步骤清单**与**分工**（我全包代码；你在平台点选/复制粘贴完成必要配置）。

---

## 5. 技术栈与架构规范（已确定，来自规则文件）

来源：`.cursor/rule/tech-stack.mdc`

- **语言**：TypeScript（前后端都尽量用 TS，类型明确）
- **前端**：React（函数组件 + Hooks）
- **地图库**：Mapbox GL JS 或 Leaflet.js（择一实现地图+红点）
- **样式**：TailwindCSS 或 CSS Modules
- **后端**：Node.js + Express.js（RESTful API）
- **认证授权**：JWT（区分管理员/游客；上传、删除、评论管理等接口必须校验 JWT）
- **数据库**：MongoDB
- **ODM**：Mongoose

> 备注：此前对话中提到“Supabase/GitHub”等平台操作方式，但最终技术栈规范要求为 **Express + MongoDB + JWT**（不使用 Supabase 作为核心后端数据库/鉴权）。

---

## 6. 开发与上线分工原则（已约定）

- **你（非技术用户）**只需要在少数平台做“点选/复制粘贴”类操作（例如：GitHub 建仓、MongoDB Atlas 建库、部署平台设置环境变量等）。
- **我**负责：
  - 生成项目代码（前端+后端）、配置、接口、页面、样式
  - 写清楚你在平台上要做的每一步（点哪里、填什么），并提供可复制内容
  - 带你完成本地运行与线上验收

---

## 7. 当前进度（截至本次关机前）

- 已完成：`PRD.md`、`DEVELOPMENT-PLAN.md`、产品命名 OnTheWay、游客昵称规则更新、隐私说明相关条目同步
- 尚未开始：代码工程创建、数据库/部署平台配置、页面实现

---

## 8. 待定项/后续需要做的关键选择（下一次开机继续）

1. **地图方案二选一**：Leaflet vs Mapbox
  - Leaflet（偏开源/轻量）或 Mapbox（更强渲染能力但可能涉及 token/计费）
2. **图片存储方案**（必须能承载 10–20MB/张的原图）
  - 方案 A：后端持久化磁盘（部署平台支持持久化存储）+ 静态文件访问  
  - 方案 B：外部对象存储（后续若需要再引入）
3. **部署平台选择**
  - 前端（如 Vercel）+ 后端（如 Render/Railway）+ MongoDB Atlas（云数据库）

---

## 9. 下次启动时的建议起点

- 先从 **阶段一：创建前端+后端项目骨架并能本地跑起来** 开始（对应 `DEVELOPMENT-PLAN.md` 的第一阶段）。

